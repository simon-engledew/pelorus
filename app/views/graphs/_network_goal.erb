<% unless object.children.empty? %>
  subgraph cluster_<%= object.id %> {
    label="<%= sanitize_label(object.name) %>";
    color="<%= line_color(object.remote_status) %>";
    fontname="Helvetica";
    fontsize="11";
    style="filled";
    penwidth="2";
    fillcolor="<%= status_color(object.local_status) %>";
    URL="<%= polymorphic_url(object.hierarchy) %>";
    <%= render :partial => 'network_goal', :collection => object.children %>
    node <%= object.id %> [width=0,fixedsize=true,style=invis];
  }
<% else %>
  node <%= object.id %> [
    fontname="Helvetica",
    fontsize="10",
    penwidth="2",
    label="<%= sanitize_label(object.name) %>",
    color="<%= line_color(object.remote_status) %>",
    URL="<%= polymorphic_url(object.hierarchy) %>",
    style="filled",
    fillcolor="<%= status_color(object.local_status) %>"
  ];
<% end %>