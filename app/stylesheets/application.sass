@import 'reset'

.show_controls
  &:hover > ul.controls
    :opacity 1
    -webkit-transition: opacity 0.1s linear

.hide_controls
  > ul.controls
    :opacity 0
    -webkit-transition: opacity 0.1s linear

=max_width($width)
  $width_px: unquote("'#{$width}px'")
  max-width: $width + 0px
  width: unquote("expression(document.body.clientWidth \> !width ? !width_px : 'auto')")

=min_width($width)
  $width_px: unquote("'#{$width}px'")
  min-width: $width + 0px
  width: unquote("expression(document.body.clientWidth \< !width ? !width_px : 'auto')")

=max_height($height)
  $height_px: unquote("'#{$height}px'")
  max-height: $height + 0px
  height: unquote("expression(this.scrollHeight \> !height ? !height_px : 'auto')")

=min_height($height)
  $height_px: unquote("'#{$height}px'")
  min-height: $height + 0px
  height: unquote("expression(this.scrollHeight \< !height ? !height_px : 'auto')")

=box_shadow($x_offset, $y_offset, $blur, $color)
  -webkit-box-shadow: $x_offset $y_offset $blur $color
  -moz-box-shadow: $x_offset $y_offset $blur $color
  box-shadow: $x_offset $y_offset $blur $color

=inset_box_shadow($x_offset, $y_offset, $blur, $color)
  -webkit-box-shadow: inset $x_offset $y_offset $blur $color
  -moz-box-shadow: inset $x_offset $y_offset $blur $color
  box-shadow: inset $x_offset $y_offset $blur $color

=border_radius($radius)
  -moz-border-radius: $radius
  -webkit-border-radius: $radius
  border-radius: $radius

=vertical_linear_gradient($from, $to)
  background: $to
  background: -webkit-gradient(linear, center top, center bottom, from($from), to($to))
  background: -moz-linear-gradient(top, $from, $to)

strong
  :font-weight bold

h1
  :font 20pt Georgia
  :color #111
  :color #222
  :margin-bottom 0.5em
  :text-shadow 0 1px 0 rgba(0, 0, 0, 0.1)

h2
  :font-size 15pt
  :margin 1em 0 0.5em
  :color #222
  :text-shadow 0 1px 0 rgba(0, 0, 0, 0.1)

h3
  :font-size 9pt
  :font-weight bold
  :margin-bottom 0.5em
  :text-shadow 0 1px 0 rgba(0, 0, 0, 0.1)

legend
  :font-size 9pt
  :font-weight bold
  :padding 0 1ex

ul.controls
  :position absolute
  > li
    :float left
    :background #222
    +vertical_linear_gradient(#333, #111)
    :margin -5px 0 0 0
    &:active
      background: #000
  > li > a
    outline-style: none
    :border-left solid 1px rgba(255, 255, 255, 0.2)
    :border-right solid 1px rgba(255, 255, 255, 0.4)
    :padding 5px 10px
    :display inline-block
    :color #fff
    :text-shadow 0 1px 0 #000
    :text-decoration none
  > li:first-child
    -webkit-border-top-left-radius: 5px
    -moz-border-radius-topleft: 5px
    -webkit-border-bottom-left-radius: 5px
    -moz-border-radius-bottomleft: 5px
    > a
      :border-left none
  > li:last-child
    -webkit-border-top-right-radius: 5px
    -moz-border-radius-topright: 5px
    -webkit-border-bottom-right-radius: 5px
    -moz-border-radius-bottomright: 5px
    > a
      :border-right none


html
  :height 100%
  :background #222 url(/images/body.png) repeat-x

!container_width = 900px

body
  :padding-top 8px
  :font-size 62.5%
  :font-family 'Lucida Grande', Verdana, Arial, Sans-Serif
  :color #333
  +min_width(!container_width)

#header, #page, #footer
  :width = !container_width
  :margin 0 auto
  :text-align left

#footer_container
  :border-top solid 3px #444
  :background #222

#footer
  :color #eaeaea
  :font-size 10pt
  :text-align center
  :overflow hidden
  :padding 1em 0
  > p
    :margin-bottom 1em
  a
    :color #fff

#header_container
  :background #fff url(/images/header_container.png) repeat-x bottom
  +box_shadow(0, 2px, 2px, rgba(0, 0, 0, 0.05))
  :overflow hidden
  :z-index 2
  :position relative
  :border-top solid 1px #bbb 
  :padding-bottom 8px
  hr
    :display none

#header
  :padding 15px 0 0
  :position relative
  > ul.controls
    :right 0
    :bottom 0
    > li
      :background #eee
      +vertical_linear_gradient(#fff, #f5f5f5)
      :border-top solid 1px #eee
      :border-bottom solid 1px #ddd
      :border-left solid 1px rgba(100, 100, 100, 0.05)
      :border-right solid 1px rgba(100, 100, 100, 0.1)
      &:active
        :background #f5f5f5
      > a
        :color #333
        :text-shadow 0 1px 0 #fff
        
    > li:first-child
      :border-left solid 1px #eee
    > li:last-child
      :border-right solid 1px #eee

  > h1
    :background transparent url(/images/logo.png) no-repeat 0 0
    :width 259px
    :height 74px
    position: relative
    > a
      outline-style: none
      display: block
      position: absolute
      width: 259px
      height: 74px
      > span
        display: none

#page_container
  +min_height(480px)
  :background #fff
  // +vertical_linear_gradient(#fff, #f6f3f1)

#page
  :padding 40px 0

.form_footer
  :margin-top 2em
  :font-size 11pt
  > a
    :margin-left 1ex

!sidebar_width = 300px
!sidebar_gutter = 40px

#content 
  :width = !container_width - !sidebar_gutter - !sidebar_width

#sidebar 
  :float right
  :width = !sidebar_width
  :padding 20px 0
  .graph 
    img 
      :border none
      :max-width 100%
      :max-height 200px
  > fieldset
    -webkit-border-bottom-right-radius: 14px
    -moz-border-radius-bottomright: 14px
  > #network_view
    legend
      :margin-left 1ex
    :font-size 9pt
    :padding 0
    :margin-bottom 2em
    .graph
      -webkit-border-bottom-right-radius: 14px
      -moz-border-radius-bottomright: 14px
      overflow: hidden
  > #navigation
    :font-size 9pt
    > h3 
      :margin-bottom 1em
    > ul > li
      :margin 0.75em 0 0 0
      > img
        :vertical-align bottom
        :margin-right 1ex
      > a 
        :color #444
        :text-decoration none

#breadcrumbs
  :border-left solid 2px #ddd
  :margin 0 0 15px
  :padding 0 0 8px 5px
  :background transparent url(/images/breadcrumbs.png) no-repeat bottom left
  a
    :text-decoration none
  li.current_node
    :font-weight bold
  .breadcrumb
    :margin-bottom 3px
    > img
      :position relative
      :bottom -5px
      :margin-right 3px
    > span
      :line-height 200%
      :padding 3px 0
      +border_radius(7px)
      :overflow-x hidden
      :color #333

#discussion
  > p
    :margin-bottom 1em
  > p.discuss
    :margin-top 2em
  > ul.discussion
    > li
      :margin-top 2em
      :margin-left 7px
      :padding-left 20px
      > ul.controls
        right: 0
      :position relative
      @extend .show_controls
      @extend .hide_controls
      img
        :position absolute
        :left -10px
      > p
        :margin-bottom 1em
      > p.details
        :margin-top -0.5em
        > span.user
          a
            :font-weight bold
            :color #333
            :text-decoration none
            &:hover
              :text-decoration underline

fieldset 
  :border solid 2px #e3e6e9
  :padding 0 10px 10px
  :margin-bottom 1em
  > *:last-child
    :margin-bottom 0 !important

div.input 
  :margin-bottom 2em
  label 
    :display block
    :margin 1em 0 0.5em

input[type=text], input[type=password], textarea, select
  :font 11pt 'Lucida Grande', Verdana, Arial, Sans-Serif
  :font-weight bold

input[type=text], input[type=password], textarea
  :color #837c7c
  :padding 8px
  :border 2px solid #dedede
  +inset_box_shadow(1px, 1px, 5px, rgba(0, 0, 0, 0.1))
  &:focus
    :border solid 2px #837C7C
    :color #383131

label 
  :font 16px Georgia, "Times New Roman", serif
  span.error
    :font-weight bold
    :color #933
    &:before
      :content ' - '

div#content
  :font-size 11pt
  > #description
    > h1
      position: relative
      margin-left: 18px
      > img
        position: absolute
        left: -30px
        top: 50%
        margin-top: -10px
    > #editable 
      :margin 2em 0
      :font-size 11pt
      > div.controls
        :margin-top 1em
    > div#description_text 
      :margin-bottom 1em
      :padding 1em
      :border-left solid 5px #aaa
      :margin-left -5px
      :text-align justify
      :color #222
      :font-size 11pt
      > p 
        :line-height 175%
        :margin-bottom 1em
        &:last-child 
          :margin-bottom 0

#back_to_top 
  :text-align right
  > a 
    :text-decoration none
    :color #cc3300
    :font-size 10pt 
    &:hover
    :text-decoration underline

input[type=button], input[type=submit], a.button
  .confirm:hover
    color: #529214
  .deny:hover
    color: #300
    
  &:active
    background: #d7d7d7
    
  margin: 0 7px 0 0
  outline-style: none
  
  +box_shadow(1px, 1px, 2px, rgba(0, 0, 0, 0.15))
  +border_radius(3px)
  text-shadow: 0 1px 0 #fff
  
  background-color: #f1f1f1
  +vertical_linear_gradient(#f1f1f1, #d7d7d7)
  
  border: solid 1px #ccc
  border-bottom-color: #999
  border-right-color: #999
  
  font-family: "Lucida Grande", Tahoma, Arial, Verdana, sans-serif
  font-size: 100%
  line-height: 130%
  text-decoration: none
  font-weight: bold
  color: #333333
  cursor: pointer
  padding: 5px 10px 6px 7px
  display: inline-block
  
  &[disabled]
    color: #999999

div.container > table > * > tr > *,
div#content > .info,
div#content > #description > div.controls > .edit 
  :color #333

div.container
  +box_shadow(0, 0, 2px, rgba(0, 0, 0, 0.25))
  > dl > li 
    :padding 0.75em 1em
    :list-style-type none
    > * 
      :display inline
  > table, div.container > dl 
    :border-collapse separate
    :border solid 1px #aaa
    :font-size 9pt
  > table
    :background #fff
    > * > tr > * 
      :padding 0.75em 1em
      :text-align center
      &:first-child
        :width 100%
        :text-align left
    > thead
      > tr:nth-child(odd)
        :background-color #fafafa
      > tr > th 
        :border-bottom solid 1px #ccc
        :font-weight bold
        :background-color #eee
    > tbody > tr
      &:last-child > td
        :border-bottom solid 1px #ddd
      > td 
        :border-bottom solid 1px #eee
        +vertical_linear_gradient(#fff, #fcfcfc)
        > div
          :position relative
          @extend .hide_controls
          > ul.controls
            :right 0

    > tbody > tr:hover > td > div > ul.controls
      :opacity 1
      -webkit-transition: opacity 0.1s linear

#errorExplanation 
  :margin-bottom 2em
  > h2 
    :color #900
  > p, > ul 
    :margin-bottom 1em
  > ul > li 
    :list-style-type disc
    :margin 0 0 0.5em 2ex

.fieldWithErrors
  input[type="text"], input[type="password"], textarea
    :background-color #fee
    +vertical_linear_gradient(#fff9f9, #fee)

input[type="text"][id$="_name"]
  :width 540px

textarea[id$="_description"], textarea[id="comment_message"]
  :width 540px
  +max_width(540px)
  +min_width(540px)
  :height 7em

#content.factor_content
  .toggle_advanced
    clear: both
    :margin 0 0 2em
  fieldset[class^="factor_"]
    padding-left: 0
    padding-right: 0
    border: none
    border-top: solid 2px #e3e6e9
    > legend
      :margin-left 1ex
    > ul > li
      :margin-top 1em
      :color #555
      > span
        :color #333
        :font-weight bold
      > span.value
        background: #eee
        text-shadow: 0 1px 0 #fff
        border: solid 1px #ddd
        border-bottom-color: #ccc
        padding: 2px 1ex
        +border_radius(14px)
        :color #222
        :font-weight normal
      > div.input
        :margin-bottom 0

  fieldset.factor_context
    input[type=text]
      width: 540px
  fieldset.factor_target
    :margin-right 20px
  fieldset.factor_target, fieldset.factor_predicted
    :width 270px
    :float left
    input[type=text]
      :width 250px
